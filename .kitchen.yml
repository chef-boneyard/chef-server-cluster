---
driver:
  name: vagrant

driver_config:
  network:
    - ["forwarded_port", {guest: 443, host: 9443, auto_correct: true}]
    - ["forwarded_port", {guest: 80, host: 9080, auto_correct: true}]
    - ["private_network", {ip: "33.33.33.15"}]
  customize:
    memory: 2048
    cpus: 2

provisioner:
  name: chef_zero

platforms:
  - name: ubuntu-12.04
  - name: ubuntu-14.04
  - name: centos-6.5
  - name: centos-7.0

suites:
  - name: fullstack
    run_list:
      - recipe[chef-server-cluster::default]
    attributes:
      ec:
        couchdb:
          enable: true
        rabbitmq:
          enable: true
        postgresql:
          enable: true
        oc_bifrost:
          enable: true
        opscode_certificate:
          enable: true
        opscode_account:
          enable: true
        opscode_solr:
          enable: true
        opscode_expander:
          enable: true
        bookshelf:
          enable: true
        opscode_org_creator:
          enable: true
        opscode_erchef:
          enable: true
        opscode_webui:
          enable: true
  - name: standalone
    run_list:
      - recipe[chef-server-cluster::standalone]
      - recipe[chef-server-cluster::create_admin]
      - recipe[chef-server-cluster::create_org]
    attributes:
      admin:
        username: flock
        firstname: Florian
        lastname: Lock
        email: ops@example.com
        password: DontUseThis4Real